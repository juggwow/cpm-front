<div class="container">
  <div class="my-5">
    <div class="neutral-08 fw-bold fs-4 my-3">บริหารสัญญา</div>
    
      <p-breadcrumb class="max-w-full" [model]="items" [style]="{background:'none',border:'none',padding:'0'}"></p-breadcrumb>
    
  </div>
  
  <div style="display: inline-flex; align-items: flex-end; gap: 40px;">
    <app-card [title]="'รายการทั้งหมด'" [bgcolor]="'#7718bc'" [textcolor]="'#fcfcfc'" [amount1]="allAmount" [amount2]="allComplete" [amount3]="allIncomplate" [detail1]="'รับของครบ'" [detail2]="'ยังไม่ครบ'" [icon1]="'assets/svg/check_circle_white.svg'" [icon2]="'assets/svg/error_white.svg'"></app-card>
    <app-card [title]="'รายการที่ตรวจสอบแล้ว'" [amount1]="checkAmount" [amount2]="checkGood" [amount3]="checkWaste" [detail1]="'ดี'" [detail2]="'พบปัญหา'" [icon1]="'assets/svg/thumb_up_black.svg'" [icon2]="'assets/svg/assignment_late_black.svg'"></app-card>
    <app-card [title]="'รายการอยู่ระหว่างดำเนินการ'" [amount1]="progressAmount" [amount2]="0" [amount3]="0" [display]="'none'"></app-card>  
  </div>

  <div class="container">
    <div class="row my-5">
      <div class="card">
        <p-table
          [value]="Boq"
          [rowHover]="true"
          [loading]="loading"
          [lazy]="true"
          (onSort)="onSortColumn($event)"
        >
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="sequencesNo">
                <div class="flex justify-content-between align-items-center">
                  ลำดับ
                  <p-sortIcon field="sequencesNo"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="itemNo">
                <div class="flex justify-content-between align-items-center">
                  Item No.
                  <p-sortIcon field="itemNo"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="name">
                <div class="flex justify-content-between align-items-center">
                  รายการ
                  <p-sortIcon field="name"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="group">
                <div class="flex justify-content-between align-items-center">
                  รายการหลัก
                  <p-sortIcon field="group"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="quantity">
                <div class="flex justify-content-between align-items-center">
                  จำนวนตามสัญญา
                  <p-sortIcon field="quantity"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="delivery">
                <div class="flex justify-content-between align-items-center">
                  จำนวนที่รอส่งมอบ
                  <p-sortIcon field="delivery"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="good">
                <div class="flex justify-content-between align-items-center">
                  สภาพดี
                  <p-sortIcon field="good"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="bad">
                <div class="flex justify-content-between align-items-center">
                  พบปัญหา
                  <p-sortIcon field="bad"></p-sortIcon>
                </div>
              </th>
              <th></th>
            </tr>
            <tr>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    pInputText
                    name="sequencesNo"
                    (keyup)="onFilterColumn('sequencesNo', $event)"
                    placeholder="ค้นหาด้วย ลำดับ"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('sequencesNo')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('ItemNo', $event)"
                    placeholder="ค้นหาด้วย BoqId"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('ItemNo')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('name', $event)"
                    placeholder="ค้นหาด้วย รายการ"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('name')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('group', $event)"
                    placeholder="ค้นหาด้วย รายการหลัก"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('group')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('quantity', $event)"
                    placeholder="ค้นหาด้วย จำนวนตามสัญญา"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('quantity')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('delivery', $event)"
                    placeholder="ค้นหาด้วย จำนวนที่รอส่งมอบ"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('delivery')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('good', $event)"
                    placeholder="ค้นหาด้วย สภาพดี"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('good')"
                  ></button>
                </div>
              </th>
              <th>
                <div class="flex align-items-center gap-2">
                  <input
                    class="w-10"
                    type="text"
                    pInputText
                    (keyup)="onFilterColumn('bad', $event)"
                    placeholder="ค้นหาด้วย พบปัญหา"
                  />
                  <button
                    pButton
                    pRipple
                    type="button"
                    icon="pi pi-times"
                    class="p-button-rounded p-button-text p-button-plain"
                    (click)="onClearFilter('bad')"
                  ></button>
                </div>
              </th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-boq>
            <tr>
              <td>{{ boq.sequencesNo }}</td>
              <td>
                {{ boq.itemNo }}
              </td>
              <td>
                {{ boq.name }}
              </td>
              <td>
                {{ boq.group }}
              </td>
              <td>
                {{ boq.quantity }}
              </td>
              <td>
                {{ boq.delivery }}
              </td>
              <td>
                {{ boq.good }}
              </td>
              <td>
                {{ boq.bad }}
              </td>
              <td>
                <div class="flex gap-1">
                  <button
                    pButton
                    class="p-button-text"
                    [routerLink]="['form']"
                  >
                    <i class="pi pi-plus-circle"></i>
                  </button>
                  <button
                    pButton
                    class="p-button-text"
                    [routerLink]="['report']"
                  >
                    <i class="pi pi-search"></i>
                  </button>
                </div>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="7">No jobsdatas found.</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="loadingbody">
            <tr>
              <td colspan="7">Loading jobsdatas data. Please wait.</td>
            </tr>
          </ng-template>
        </p-table>
        <div class="card flex justify-content-center">
          <p-paginator
            (onPageChange)="onPageChange($event, contractId)"
            [first]="first"
            [rows]="rows"
            [totalRecords]="totalRecords"
            [rowsPerPageOptions]="[5, 10, 50]"
          ></p-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
