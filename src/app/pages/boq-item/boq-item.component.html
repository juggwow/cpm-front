<div class="p-0 mt-3">
  <p class="font-bold text-2xl text-primar mb-4">บริหารสัญญา</p>
  <p-breadcrumb *ngIf="items" [model]="items" [style]="{background:'none',border:'none',padding:'0',margin: '0 0 1.5rem 0'}"></p-breadcrumb>

  <div class="flex flex-row flex-wrap justify-items-between gap-3">
    <app-card [title]="'รายการทั้งหมด'" [bgcolor]="'#7718bc'" [textcolor]="'#fcfcfc'" [amount1]="allAmount"
      [amount2]="allComplete" [amount3]="allIncomplate" [detail1]="'รับของครบ'" [detail2]="'ยังไม่ครบ'"
      [icon1]="'assets/svg/check_circle_white.svg'" [icon2]="'assets/svg/error_white.svg'"></app-card>
    <app-card [title]="'รายการที่ตรวจสอบแล้ว'" [amount1]="checkAmount" [amount2]="checkGood" [amount3]="checkWaste"
      [detail1]="'ดี'" [detail2]="'พบปัญหา'" [icon1]="'assets/svg/thumb_up_black.svg'"
      [icon2]="'assets/svg/assignment_late_black.svg'" [routerLink]="['approve']"></app-card>
    <app-card [title]="'รายการอยู่ระหว่างดำเนินการ'" [amount1]="progressAmount" [amount2]="0" [amount3]="0"
      [display]="'none'" [routerLink]="['progress']"></app-card>
  </div>


    
      <div class="card mt-5">
        <p-table [value]="Boq" [rowHover]="true" [loading]="loading" [lazy]="true" (onSort)="onSortColumn($event)" [tableStyle]="{ 'min-width': '60rem' }" >
          <ng-template pTemplate="header">
            <tr class="text-xs sm:text-sm md:text-base">
              <th pSortableColumn="sortRowNo">
                <div class="flex justify-content-between align-items-center">
                  ลำดับ
                  <p-sortIcon field="sortRowNo"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortNumber">
                <div class="flex justify-content-between align-items-center">
                  Item No.
                  <p-sortIcon field="sortNumber"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortName">
                <div class="flex justify-content-between align-items-center">
                  รายการ
                  <p-sortIcon field="sortName"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortGroupName">
                <div class="flex justify-content-between align-items-center">
                  รายการหลัก
                  <p-sortIcon field="sortGroupName"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortQuantity">
                <div class="flex justify-content-between align-items-center">
                  จำนวนตามสัญญา
                  <p-sortIcon field="sortQuantity"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortDeliveryQty">
                <div class="flex justify-content-between align-items-center">
                  จำนวนที่รอส่งมอบ
                  <p-sortIcon field="sortDeliveryQty"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortReceiveQty">
                <div class="flex justify-content-between align-items-center">
                  สภาพดี
                  <p-sortIcon field="sortReceiveQty"></p-sortIcon>
                </div>
              </th>
              <th pSortableColumn="sortDamageQty">
                <div class="flex justify-content-between align-items-center">
                  พบปัญหา
                  <p-sortIcon field="sortDamageQty"></p-sortIcon>
                </div>
              </th>
              <th></th>
            </tr>
            <tr>
              <th>
                <span class="p-input-icon-right">
                  <input #inputRowNo type="text" pInputText (keyup)="onFilterColumn('searchRowNo', $event)"
                    placeholder="Search" style="width: 5rem" />
                  <i *ngIf="inputRowNo.value" class="pi pi-times cursor-pointer"
                    (click)="inputRowNo.value = '';onClearFilter('searchRowNo')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputNumber type="text" pInputText (keyup)="onFilterColumn('searchNumber', $event)"
                    placeholder="Search" style="width: 5rem"/>
                  <i *ngIf="inputNumber.value" class="pi pi-times cursor-pointer"
                    (click)="inputNumber.value = '';onClearFilter('searchNumber')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputName type="text" pInputText (keyup)="onFilterColumn('searchName', $event)"
                    placeholder="Search" style="width: 10rem"/>
                  <i *ngIf="inputName.value" class="pi pi-times cursor-pointer"
                    (click)="inputName.value = '';onClearFilter('searchName')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputGroupName type="text" pInputText (keyup)="onFilterColumn('searchGroupName', $event)"
                    placeholder="Search" style="width: 10rem"/>
                  <i *ngIf="inputGroupName.value" class="pi pi-times cursor-pointer"
                    (click)="inputGroupName.value = '';onClearFilter('searchGroupName')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputQuantity type="text" pInputText (keyup)="onFilterColumn('searchQuantity', $event)"
                    placeholder="Search" style="width: 5rem"/>
                  <i *ngIf="inputQuantity.value" class="pi pi-times cursor-pointer"
                    (click)="inputQuantity.value = '';onClearFilter('searchQuantity')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputDeliveryQty type="text" pInputText (keyup)="onFilterColumn('searchDeliveryQty', $event)"
                    placeholder="Search" style="width: 5rem"/>
                  <i *ngIf="inputDeliveryQty.value" class="pi pi-times cursor-pointer"
                    (click)="inputDeliveryQty.value = '';onClearFilter('searchDeliveryQty')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputReceiveQty type="text" pInputText (keyup)="onFilterColumn('searchReceiveQty', $event)"
                    placeholder="Search" style="width: 5rem"/>
                  <i *ngIf="inputReceiveQty.value" class="pi pi-times cursor-pointer"
                    (click)="inputReceiveQty.value = '';onClearFilter('searchReceiveQty')"></i>
                </span>
              </th>
              <th>
                <span class="p-input-icon-right">
                  <input #inputDamageQty type="text" pInputText (keyup)="onFilterColumn('searchDamageQty', $event)"
                    placeholder="Search" style="width: 5rem"/>
                  <i *ngIf="inputDamageQty.value" class="pi pi-times cursor-pointer"
                    (click)="inputDamageQty.value = '';onClearFilter('searchDamageQty')"></i>
                </span>
              </th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-boq>
            <tr class="text-xs sm:text-sm md:text-base">
              <td>{{ boq.rowNo }}</td>
              <td>
                {{ boq.number }}
              </td>
              <td>
                {{ boq.name }}
              </td>
              <td>
                {{ boq.groupName }}
              </td>
              <td>
                {{ boq.quantity }}
              </td>
              <td>
                {{ boq.deliveryQty }}
              </td>
              <td>
                {{ boq.receiveQty }}
                <span *ngIf="boq.receiveStatus=='1'" class="pi pi-check-circle" style="color: green"></span>
              </td>
              <td class = "text-red-500">
                {{ boq.damageQty }}
              </td>
              <td>
                <div class="flex gap-1">
                  <button pButton class="p-button-text" [routerLink]="['item',boq.id,'report','create']">
                    <i class="pi pi-plus-circle"></i>
                  </button>
                  <button pButton class="p-button-text" [routerLink]="['item',boq.id,'report']">
                    <i class="pi pi-search"></i>
                  </button>
                </div>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="7">ไม่พบข้อมูล</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="loadingbody">
            <tr>
              <td colspan="7">กำลังโหลดข้อมูล....</td>
            </tr>
          </ng-template>
        </p-table>
        <div class="flex justify-content-end mt-5">
          <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows" [totalRecords]="totalRecords"
            [rowsPerPageOptions]="[5, 10, 50]"></p-paginator>
        </div>

      </div>
    
</div>
